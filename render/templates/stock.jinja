{% from "macros/header.jinja" import header with context %}

<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tom Car Sales</title>

    <link rel="stylesheet" href={{ url_for("static",filename="app.css" ) }}>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="p-3">
    {{ header() }}

    <div class="flex flex-col">
      {% for car in functions.all() %}
        {% set modelInfo=functions.model(car["fk_model_id"]) %}
        <form>
          <fieldset class="border border-solid border-slate-600 flex flex-row items-center gap-4">
            <legend class="ml-5">{{ car.registration }}</legend>
            <img class="w-24 h-fit"
                 src="{{ modelInfo.logo_link }}"
                 alt="{{ modelInfo.name }}">

            {% for prop in car %}
              <p>
                {% if prop.lower().find("fk") < 0 %}
                  {{ prop.title().replace("_"," ") }}: {{ car[prop] }}
                {% endif %}
              </p>
            {% endfor %}

          </fieldset>
        </form>
      {% endfor %}
    </div>
  </body>
</html>
